<!DOCTYPE html>
<html>
<head>
<style>
.table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}
 .head {
  font-weight: bold;
  text-align: center;
  vertical-align: top;
  padding: 10px;
}

.center {
  text-align: center;
}

.left {
  text-align: left;
  vertical-align: top
}

.button {
  text-align: center;
  padding: 10px;
  font-family: sans-serif;
}


td{
 font-family: sans-serif;
  font-size: 14px;
  padding: 10px 5px;
  border-style: solid;
  border-width: 1px;
  border-color:#808080;
}
th{
  font-size: 14px;
  font-weight: normal;
  padding: 10px 5px;
  border-style: solid;
  border-width: 1px;
  color: #000;
  background-color: #999;
}

 tr:nth-child(odd) {
  background-color:#808080;
}

</style>

</head>
<body>

<h2>Student grade table</h2>

<table class="table" id="Gradeforassement" style="width:90%">
  <tr>
    <th>Student Name</th>
    <th>Student ID</th>
    <th>Assignment 1</th>
    <th>Assignment 2</th>
    <th>Assignment 3</th>
    <th>Assignment 4</th>
    <th>Assignment 5</th>
    <th>Average</th>
  </tr>
  <tr>
    <td  style='text-align:left'>Kelly Walt</td>
    <td style = 'text-align:left'>23467892</td>
    <td contenteditable style = 'text-align:right'>-</td>
    <td  contenteditable style = 'text-align:right'>-</td>
     <td  contenteditable style = 'text-align:right'>-</td>
      <td contenteditable style = 'text-align:right'>-</td>
       <td contenteditable style = 'text-align:right'>-</td>
        <td  style = 'text-align:center'>-</td>
  </tr>
  
  <tr>
    <td  style='text-align:left'>Genet Jean</td>
    <td style = 'text-align:left'>23341334</td>
    <td contenteditable style = 'text-align:right'>-</td>
    <td  contenteditable style = 'text-align:right'>-</td>
     <td  contenteditable style = 'text-align:right'>-</td>
      <td contenteditable style = 'text-align:right'>-</td>
       <td contenteditable style = 'text-align:right'>-</td>
        <td  style = 'text-align:center'>-</td>
  </tr>

  <tr>
    <td  style='text-align:left'>Frostrup Mariella</td>
    <td style = 'text-align:left'>45362156</td>
    <td contenteditable style = 'text-align:right'>-</td>
    <td  contenteditable style = 'text-align:right'>-</td>
     <td  contenteditable style = 'text-align:right'>-</td>
      <td contenteditable style = 'text-align:right'>-</td>
       <td contenteditable style = 'text-align:right'>-</td>
        <td  style = 'text-align:center'>-</td>
  </tr>

  <tr>
    <td  style='text-align:left'>Derrida Jacques</td>
    <td style = 'text-align:left'>30120390</td>
    <td contenteditable style = 'text-align:right'>-</td>
    <td  contenteditable style = 'text-align:right'>-</td>
     <td  contenteditable style = 'text-align:right'>-</td>
      <td contenteditable style = 'text-align:right'>-</td>
       <td contenteditable style = 'text-align:right'>-</td>
        <td  style = 'text-align:center'>-</td>
  </tr>

  <tr>
    <td  style='text-align:left'>Colson Charles</td>
    <td style = 'text-align:left'>21086343</td>
    <td contenteditable style = 'text-align:right'>-</td>
    <td  contenteditable style = 'text-align:right'>-</td>
     <td  contenteditable style = 'text-align:right'>-</td>
      <td contenteditable style = 'text-align:right'>-</td>
       <td contenteditable style = 'text-align:right'>-</td>
        <td  style = 'text-align:center'>-</td>
  </tr>

  <tr>
    <td  style='text-align:left'>Bacon Francis</td>
    <td style = 'text-align:left'>30021919</td>
    <td contenteditable style = 'text-align:right'>-</td>
    <td  contenteditable style = 'text-align:right'>-</td>
     <td  contenteditable style = 'text-align:right'>-</td>
      <td contenteditable style = 'text-align:right'>-</td>
       <td contenteditable style = 'text-align:right'>-</td>
        <td  style = 'text-align:center'>-</td>
  </tr>

  <tr>
    <td  style='text-align:left'>Ace Jane</td>
    <td style = 'text-align:left'>43209837</td>
    <td contenteditable style = 'text-align:right'>-</td>
    <td  contenteditable style = 'text-align:right'>-</td>
     <td  contenteditable style = 'text-align:right'>-</td>
      <td contenteditable style = 'text-align:right'>-</td>
       <td contenteditable style = 'text-align:right'>-</td>
        <td   style = 'text-align:center'>-</td>
  </tr>

  <tr>
    <td  style='text-align:left'>Adams Henry</td>
    <td style = 'text-align:left'>30029302</td>
    <td contenteditable style = 'text-align:right'>-</td>
    <td  contenteditable style = 'text-align:right'>-</td>
     <td  contenteditable style = 'text-align:right'>-</td>
      <td contenteditable style = 'text-align:right'>-</td>
       <td contenteditable style = 'text-align:right'>-</td>
        <td  style = 'text-align:center'>-</td>
  </tr>

  <tr>
    <td  style='text-align:left'>Aaron Hank</td>
    <td style = 'text-align:left'>40029438</td>
    <td contenteditable style = 'text-align:right'>-</td>
    <td  contenteditable style = 'text-align:right'>-</td>
     <td  contenteditable style = 'text-align:right'>-</td>
      <td contenteditable style = 'text-align:right'>-</td>
       <td contenteditable style = 'text-align:right'>-</td>
        <td  style = 'text-align:center'>-</td>
  </tr>

  <tr>
    <td  style='text-align:left'>Kevin Burner</td>
    <td style = 'text-align:left'>20067866</td>
    <td contenteditable style = 'text-align:right'>-</td>
    <td  contenteditable style = 'text-align:right'>-</td>
     <td  contenteditable style = 'text-align:right'>-</td>
      <td contenteditable style = 'text-align:right'>-</td>
       <td contenteditable style = 'text-align:right'>-</td>
        <td  style = 'text-align:center'>-</td>
  </tr>
</table>

 <table class="table" id="Notsubmit">
      <thead>
        <tr>
            <th class="head">Not-Submitted</th>
        </tr>
      </thead>
        <tr>
            <td class="center" contenteditable style ="false">-</td>
        </tr>
    </table>
   <div class="button" id="button">
      <button class="button" onClick="half(); Notsubmit()">Calculate Grade</button>
      <div id="missingAssignmentCount">
        <div id="buttons">
            <button id="addRow"type="button" onclick="addRow()">Add row</button>
            <button id="removeRow" onclick="removeRow()">Delete row</button>
            </br>
            <button id="addCol" onclick="addColumn()">Add column</button>
            <button id="removeCol" onclick="deleteColumn()">Delete column</button>
            </br>
        </div>
      </div>
      </div>

</body>
</html>

<script>
    function Ed() {
  for (var i = 1; i < 11; i++) {
    for (var j = 2; j < 7; j++) {
      document.getElementById("Gradeforassement").rows[i].cells[j].contentEditable = true;
      //make every cell in table editable where contentEditable hasn't been set to false in HTML
    }
  }
}


function Notsubmit() {
  var table = document.getElementById("Gradeforassement");
  var rows = table.rows.length;
  var cols = table.rows[0].cells.length;
  var notsubcount = 0;
 
  for (var i = 1; i < rows; i++) {
    for (var j = 2; j < (cols - 1); j++) {
      var add = table.rows[i].cells[j]; //check through every cell
      if (add.innerHTML === '-' || add.innerHTML === '') {
       notsubcount++; //if they are empty increment unsubmitted count
      }
    }
  }
 
  Aver();
 
  var notsub = document.getElementById("Notsubmit");
  var notsubrows = notsubrows.rows;
  notsubrows[1].style.backgroundColor = "red";
  notsubrows[1].style.color = "white";
  notsubrows[1].style.textAlign = "right";
  notsubrows[1].innerHTML = "<td>" + notsubcount + "</td>"; //show count how unsubmitted assignments
  if(notsubcount == 0) { //checnge colour when there are no unsubmitted assignments
    notsubrows[1].style.backgroundColor = "white";
    notsubrows[1].style.color = "black";
    notsubrows[1].style.textAlign = "right";
  }
}


function half() {
  var table = document.getElementById("Gradeforassement");
  var rows = table.rows;
 
  for (var i = 1; i < rows.length; i++) {
    var cells = rows[i].cells;
    var sum = 0;

    for (var j = 2; j < (cells.length - 1); j++) {
      var cell = cells[j];
      var num = parseInt(cell.innerHTML); //assign value in cell to var
     
      if (!isNaN(num)) { //check that input is only numbers
        //https://www.w3schools.com/jsref/jsref_isnan.asp
        if(num <= 100 || num >= 0){ //check inputted grade is only 0-100 (doesn't work?)
        sum += num;
        rows[i].cells[j].style.backgroundColor = "white";
        rows[i].cells[j].style.color = "black";
        rows[i].cells[j].style.textAlign = "right"
        }
      } else { //if it's not 0-100, then it is invalid
        rows[i].cells[j].style.backgroundColor = "green";
        rows[i].cells[j].style.color = "black";
        rows[i].cells[j].innerHTML = "-";
      }
    }
   
    var avg = sum / 5; //calculate average of the 5 grades

    if (avg < 60) { //check if grade is above or below 60
      rows[i].cells[7].innerHTML = "<td>" + Math.round(avg) + "%" + "</td>";
      rows[i].cells[7].style.backgroundColor = "red";
      rows[i].cells[7].style.color = "white";
      rows[i].cells[7].style.textAlign = "right"
    } else {
      rows[i].cells[7].innerHTML = "<td>" + Math.round(avg) + "%" + "</td>";
      rows[i].cells[7].style.backgroundColor = "white";
      rows[i].cells[7].style.color = "black";
      rows[i].cells[7].style.textAlign = "right"
    }
  }
}




    function compute() {
    var tableBody = document.getElementById("Table").tBodies[0];
    var sumOfUnSubmitted=0;
    for (var i=0; i<tableBody.rows.length; i++) {
        var sum = 0;
        var sumOfAssignemtsSubmitted = 0;
        var singleRow=tableBody.rows[i];
        for(var j=0;j<singleRow.cells.length;j++){
            if(j==0 || j==1 ){

            }
            else {
                if( (singleRow.cells[j].innerHTML == '-') && (j != singleRow.cells.length-1) ){
                    sumOfUnSubmitted=sumOfUnSubmitted+1;
                    singleRow.cells[j].style.backgroundColor = "yellow"
                }else if(!validInput(singleRow.cells[j].innerHTML) && (j != singleRow.cells.length-1)){
                    singleRow.cells[j].innerHTML = '-';
                    singleRow.cells[j].style.backgroundColor = "yellow"
                }else{
                    if((j != singleRow.cells.length-1)){
                        singleRow.cells[j].style.backgroundColor = "white"
                        sum += Number(singleRow.cells[j].innerHTML);
                        sumOfAssignemtsSubmitted+=1;
                    }
                }

                // if its the last col set the average
                //calculates row average
                if(j == singleRow.cells.length-1 && sumOfAssignemtsSubmitted !=0 ) {
                    var percentValue=Math.round(sum/sumOfAssignemtsSubmitted);
                    console.log(percentValue);
                    mapGradeToType(percentValue,singleRow,j);
                    if(percentValue<60){
                        singleRow.cells[j].style.backgroundColor = "red";
                        singleRow.cells[j].style.color="white";
                    }
                    if(percentValue>60){
                        singleRow.cells[j].style.backgroundColor = "white";
                        singleRow.cells[j].style.color="black";
                    }
                }

            }
        }
    }
    
    document.getElementById('missingGrades').innerHTML='Missing grades : ' +sumOfUnSubmitted;
}


function mapGradeToType(percentValue,singleRow , j){
   
    if(averageGradeType==1){
        singleRow.cells[j].innerHTML=percentValue;
    }else if(averageGradeType==2){
        if(percentValue>=93){
            singleRow.cells[j].innerHTML='A';
        }
        else if(percentValue>= 90 && percentValue <=92 ){
            singleRow.cells[j].innerHTML='A-';
        }
        else if(percentValue>= 87 && percentValue <=89 ){
            singleRow.cells[j].innerHTML='B+';
        }
        else if(percentValue>= 83 && percentValue <=86 ){
            singleRow.cells[j].innerHTML='B';
        }
        else if(percentValue>= 80 && percentValue <=82 ){
            singleRow.cells[j].innerHTML='B-';
        }
        else if(percentValue>= 77 && percentValue <=79 ){
            singleRow.cells[j].innerHTML='C+';
        }
        else if(percentValue>= 73 && percentValue <=76 ){
            singleRow.cells[j].innerHTML='C';
        }
        else if(percentValue>= 70 && percentValue <=72 ){
            singleRow.cells[j].innerHTML='C-';
        }
        else if(percentValue>= 67 && percentValue <=69 ){
            singleRow.cells[j].innerHTML='D+';
        }
        else if(percentValue>= 63 && percentValue <=66 ){
            singleRow.cells[j].innerHTML='D';
        }
        else if(percentValue>= 60 && percentValue <=61 ){
            singleRow.cells[j].innerHTML='D-';
        }
        else if(percentValue < 62 ){
            singleRow.cells[j].innerHTML='F';
        }
    }else{
        if(percentValue>=93){
            singleRow.cells[j].innerHTML='4.0';
        }
        else if(percentValue>= 90 && percentValue <=92 ){
            singleRow.cells[j].innerHTML='3.7';
        }
        else if(percentValue>= 90 && percentValue <=92 ){
            singleRow.cells[j].innerHTML='3.7';
        }
        else if(percentValue>= 87 && percentValue <=89 ){
            singleRow.cells[j].innerHTML='3.3';
        }
        else if(percentValue>= 83 && percentValue <=86 ){
            singleRow.cells[j].innerHTML='3.0';
        }
        else if(percentValue>= 83 && percentValue <=86 ){
            singleRow.cells[j].innerHTML='3.0';
        }
        else if(percentValue>= 80 && percentValue <=82 ){
            singleRow.cells[j].innerHTML='2.7';
        }
        else if(percentValue>= 77 && percentValue <=79 ){
            singleRow.cells[j].innerHTML='2.3';
        }
        else if(percentValue>= 73 && percentValue <=76 ){
            singleRow.cells[j].innerHTML='2.0';
        }
        else if(percentValue>= 70 && percentValue <=72 ){
            singleRow.cells[j].innerHTML='1.7';
        }
        else if(percentValue>= 67 && percentValue <=69 ){
            singleRow.cells[j].innerHTML='1.3';
        }
        else if(percentValue>= 63 && percentValue <=66 ){
            singleRow.cells[j].innerHTML='1.0';
        }
        else if(percentValue>= 60 && percentValue <=61 ){
            singleRow.cells[j].innerHTML='0.7';
        }
        else if(percentValue < 62 ){
            singleRow.cells[j].innerHTML='0.0';
        }
    }

}


function validInput(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
}

function gradeCycle(){

    var tableHead = document.getElementById('Table').tHead;
    var headerRow = tableHead.rows[0];
    var lastColId = headerRow.cells.length;
    var lastCol = headerRow.cells[lastColId-1];

    if(averageGradeType == 3){
        averageGradeType = 1;
    }else{
        averageGradeType+=1;
    }
    compute();
    if(averageGradeType ==3){
        lastCol.innerHTML="Average [4.0]";
    }
    if(averageGradeType ==2){
        lastCol.innerHTML="Average [Letter]";
    }
    if(averageGradeType ==1){
        lastCol.innerHTML="Average (%)";
    }


}


  
</script>